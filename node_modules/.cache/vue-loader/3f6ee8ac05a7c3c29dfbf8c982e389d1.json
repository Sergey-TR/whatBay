{"remainingRequest":"/home/sergey/projects/whatbayGH/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/sergey/projects/whatbayGH/src/views/CreateProduct.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/sergey/projects/whatbayGH/src/views/CreateProduct.vue","mtime":1643276979377},{"path":"/home/sergey/projects/whatbayGH/node_modules/cache-loader/dist/cjs.js","mtime":1643348323584},{"path":"/home/sergey/projects/whatbayGH/node_modules/babel-loader/lib/index.js","mtime":1643348324864},{"path":"/home/sergey/projects/whatbayGH/node_modules/cache-loader/dist/cjs.js","mtime":1643348323584},{"path":"/home/sergey/projects/whatbayGH/node_modules/vue-loader/lib/index.js","mtime":1643348325232}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7bWFwR2V0dGVyc30gZnJvbSAidnVleCI7CmltcG9ydCBNb2RhbE5ld0NhdGVnb3J5IGZyb20gIi4uL2NvbXBvbmVudHMvbW9kYWwvTW9kYWxOZXdDYXRlZ29yeSI7CmltcG9ydCBNb2RhbE5ld1Byb2R1Y3QgZnJvbSAiLi4vY29tcG9uZW50cy9tb2RhbC9Nb2RhbE5ld1Byb2R1Y3QiOwppbXBvcnQgcHJvZHVjdEZpbHRlciBmcm9tICIuLi9maWx0ZXJzL3Byb2R1Y3QuZmlsdGVyIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQ3JlYXRlUHJvZHVjdCIsCiAgY29tcG9uZW50czogewogICAgTW9kYWxOZXdDYXRlZ29yeSwKICAgIE1vZGFsTmV3UHJvZHVjdAogIH0sCgogIHByb3BzOiBbJ3Nob3AnLCAnZGF5JywgJ2lkJywgJ2xpc3RfaWQnXSwKCiAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICBwcm9kdWN0OiAnbnVsbCcsCiAgICAgIGNhdGVnb3J5X2lkOiAwLAogICAgICBpc01vZGFsTmV3Q2F0ZWdvcnk6IGZhbHNlLAogICAgICBpc01vZGFsTmV3UHJvZHVjdDogZmFsc2UKICAgIH0KICB9LAoKICBtZXRob2RzOiB7CiAgICBhc3luYyBjcmVhdGVQcm9kdWN0KCkgewogICAgICBjb25zdCBpc1Byb2R1Y3QgPSB0aGlzLmdldExpc3RQcm9kdWN0cy5maWx0ZXIoaXRlbSA9PiBpdGVtLnByb2R1Y3RfbmFtZSA9PT0gdGhpcy5wcm9kdWN0KQogICAgICBpZiAoIWlzUHJvZHVjdC5sZW5ndGgpIHsKICAgICAgICBjb25zdCBuZXdQcm9kdWN0ID0gewogICAgICAgICAgY2F0ZWdvcnlfaWQ6IHRoaXMuY2F0ZWdvcnlfaWQsCiAgICAgICAgICBkYXk6IHRoaXMuZGF5LAogICAgICAgICAgaXNfc3VjY2VzczogZmFsc2UsCiAgICAgICAgICBzaG9wX2lkOiB0aGlzLmlkLAogICAgICAgICAgc2hvcF9uYW1lOiB0aGlzLnNob3AsCiAgICAgICAgICBvcmRlcl9pZDogdGhpcy5pZCwKICAgICAgICAgIGNhdGVnb3J5X25hbWU6IHRoaXMuY2F0ZWdvcnksCiAgICAgICAgICBwcm9kdWN0X25hbWU6IHRoaXMucHJvZHVjdCwKICAgICAgICAgIHVzZXJfaWQ6IHRoaXMuZ2V0VXNlcklkLAogICAgICAgICAgbGlzdF9pZDogdGhpcy5saXN0X2lkCiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnY3JlYXRlTmV3T3JkZXJzUHJvZHVjdCcsIG5ld1Byb2R1Y3QpCiAgICAgICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnY3JlYXRlTmV3UHJvZHVjdCcsIG5ld1Byb2R1Y3QpCiAgICAgICAgICBhd2FpdCB0aGlzLiRyb3V0ZXIucHVzaChgL215X3Nob3BzX3Nob3AvJHt0aGlzLmlkfS8ke3RoaXMuc2hvcH0vJHt0aGlzLmRheX1gKQogICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYWxlcnQoJ9Cf0YDQvtC00YPQutGCINC10YHRgtGMINCyINGB0L/QuNGB0LrQtScpCiAgICAgIH0KICAgIH0sCgogICAgc2hvd01vZGFsTmV3Q2F0ZWdvcnkoKSB7CiAgICAgIHRoaXMuaXNNb2RhbE5ld0NhdGVnb3J5ID0gdHJ1ZQogICAgfSwKCiAgICBzaG93TW9kYWxOZXdQcm9kdWN0KCkgewogICAgICB0aGlzLmlzTW9kYWxOZXdQcm9kdWN0ID0gdHJ1ZQogICAgfSwKICAgIGNsb3NlTW9kYWxDcmVhdGVQcm9kdWN0KCkgewogICAgICB0aGlzLmlzTW9kYWxOZXdQcm9kdWN0ID0gZmFsc2UKICAgIH0sCiAgICBjbG9zZU1vZGFsQ3JlYXRlQ2F0ZWdvcnkoKSB7CiAgICAgIHRoaXMuaXNNb2RhbE5ld0NhdGVnb3J5ID0gZmFsc2UKICAgIH0KICB9LAoKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycwogICAgKFsKICAgICAgJ2dldExpc3RQcm9kdWN0cycsCiAgICAgICdnZXRDYXRlZ29yeVVzZXJJZCcsCiAgICAgICdnZXRVc2VySWQnLAogICAgICAnZ2V0UHJvZHVjdFVzZXJJZCcKICAgIF0pLAoKICAgIHByb2R1Y3RzKCkgewogICAgICByZXR1cm4gIHByb2R1Y3RGaWx0ZXIodGhpcy5jYXRlZ29yeV9pZCwgdGhpcy5nZXRQcm9kdWN0VXNlcklkKQogICAgfSwKICB9LAogIG1vdW50ZWQoKSB7fQp9Cg=="},{"version":3,"sources":["CreateProduct.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"CreateProduct.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <form class=\"form-create\" method=\"post\" @submit.prevent=\"createProduct\">\n      <div class=\"w-100\">\n        <div class=\"select-wrapper\">\n          <div class=\"w-100\">\n            <select v-model=\"category_id\" class=\"new-shop-list-select\">\n              <option value=\"null\" disabled selected class=\"opSelected\">Без категории</option>\n              <option v-for=\"option in getCategoryUserId\" :key=\"option.id\"\n                    :value=\"option.id\">\n                {{ option.category_name}}\n              </option>\n            </select>\n          </div>\n          <div class=\"btn-add-product\" @click=\"showModalNewCategory\">+</div>\n        </div>\n        <p class=\"small p-2\">выберите категорию или <br>\n          <span class=\"btn-add-category\" @click=\"showModalNewCategory\">добавте новую</span></p>\n      </div>\n      <div class=\"w-100\">\n        <div class=\"select-wrapper\">\n          <div class=\"w-100\">\n            <select v-model=\"product\" class=\"new-shop-list-select\">\n              <option value=\"null\" disabled selected class=\"opSelected\">Выберите продукт</option>\n              <option v-for=\"opProduct in products\" :value=\"opProduct.product_name\">\n                {{ opProduct.product_name}}\n              </option>\n            </select>\n          </div>\n          <div class=\"btn-add-product\" @click=\"showModalNewProduct\">+</div>\n        </div>\n        <p class=\"small p-2\">выберите продукт или <br>\n          <span class=\"btn-add-category\" @click=\"showModalNewProduct\">добавить новый</span>\n        </p>\n      </div>\n      <button class=\"button btn-add\" type=\"submit\">Добавить</button>\n    </form>\n    <ModalNewCategory v-if=\"isModalNewCategory\"\n                      :category_id=\"this.category_id\"\n                      :shop=\"this.shop\"\n                      :day=\"this.day\"\n                      :id=\"this.id\"\n                      @closeModalCreateCategory=\"closeModalCreateCategory\"/>\n    <ModalNewProduct v-if=\"isModalNewProduct\"\n                     :category_id=\"this.category_id\"\n                     :shop=\"this.shop\"\n                     :day=\"this.day\"\n                     :id=\"this.id\"\n                     :user_id=\"this.getUserId\"\n                     :list_id=\"this.list_id\"\n    @closeModalCreateProduct=\"closeModalCreateProduct\"/>\n  </div>\n</template>\n\n<script>\nimport {mapGetters} from \"vuex\";\nimport ModalNewCategory from \"../components/modal/ModalNewCategory\";\nimport ModalNewProduct from \"../components/modal/ModalNewProduct\";\nimport productFilter from \"../filters/product.filter\";\n\nexport default {\n  name: \"CreateProduct\",\n  components: {\n    ModalNewCategory,\n    ModalNewProduct\n  },\n\n  props: ['shop', 'day', 'id', 'list_id'],\n\n  data () {\n    return {\n      product: 'null',\n      category_id: 0,\n      isModalNewCategory: false,\n      isModalNewProduct: false\n    }\n  },\n\n  methods: {\n    async createProduct() {\n      const isProduct = this.getListProducts.filter(item => item.product_name === this.product)\n      if (!isProduct.length) {\n        const newProduct = {\n          category_id: this.category_id,\n          day: this.day,\n          is_success: false,\n          shop_id: this.id,\n          shop_name: this.shop,\n          order_id: this.id,\n          category_name: this.category,\n          product_name: this.product,\n          user_id: this.getUserId,\n          list_id: this.list_id\n        }\n        try {\n          await this.$store.dispatch('createNewOrdersProduct', newProduct)\n          await this.$store.dispatch('createNewProduct', newProduct)\n          await this.$router.push(`/my_shops_shop/${this.id}/${this.shop}/${this.day}`)\n        } catch (e) {}\n      } else {\n        alert('Продукт есть в списке')\n      }\n    },\n\n    showModalNewCategory() {\n      this.isModalNewCategory = true\n    },\n\n    showModalNewProduct() {\n      this.isModalNewProduct = true\n    },\n    closeModalCreateProduct() {\n      this.isModalNewProduct = false\n    },\n    closeModalCreateCategory() {\n      this.isModalNewCategory = false\n    }\n  },\n\n  computed: {\n    ...mapGetters\n    ([\n      'getListProducts',\n      'getCategoryUserId',\n      'getUserId',\n      'getProductUserId'\n    ]),\n\n    products() {\n      return  productFilter(this.category_id, this.getProductUserId)\n    },\n  },\n  mounted() {}\n}\n</script>\n\n<style scoped>\n  .new-shop-list-select {\n    border: 1px solid #c4c4c4;\n    background: none;\n    outline: none;\n    /*min-width: 200px;*/\n    width: 100%;\n    height: 56px;\n    border-radius: 7px;\n    padding: 0px 11px;\n    color: #242e42;\n    --webkit-appearence: none;\n    --moz-appearance: none;\n    --ms-appearance: none;\n    appearance: none;\n    background-image: url(\"data:image/svg+xml,%3Csvg width='10' height='5' viewBox='0 0 10 5' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0L5 5L10 0H0Z' fill='black' fill-opacity='0.54'/%3E%3C/svg%3E%0A\");\n    background-repeat: no-repeat;\n    background-position-x: right;\n    background-position-y: center;\n    background-origin: content-box;\n  }\n  .form-create {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    padding: 0px 16px;\n  }\n  .select-wrapper {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n  }\n  .btn-add-category {\n    border: none;\n    background: none;\n    outline: none;\n    color: #2C9AB7;\n  }\n  .btn-add-category:hover {\n    color: #2C9AB7;\n    font-weight: bold;\n    text-decoration: underline;\n  }\n  .btn-add {\n    width: 150px;\n    height: 56px;\n  }\n  .btn-add-product {\n    border: 1px solid #2C9AB7;\n    background: none;\n    outline: none;\n    border-radius: 7px;\n    color: #2C9AB7;\n    width: 50px;\n    height: 50px;\n    font-size: 32px;\n    margin-left: 10px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  .btn-add-product:hover {\n    background: #2C9AB7;\n    color: #FFFFFF;\n  }\n</style>"]}]}