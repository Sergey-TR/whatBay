{"remainingRequest":"/home/sergey/projects/whatbayGH/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/sergey/projects/whatbayGH/src/components/calendar/Calendar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/sergey/projects/whatbayGH/src/components/calendar/Calendar.vue","mtime":1643303591972},{"path":"/home/sergey/projects/whatbayGH/node_modules/cache-loader/dist/cjs.js","mtime":1643348323584},{"path":"/home/sergey/projects/whatbayGH/node_modules/babel-loader/lib/index.js","mtime":1643348324864},{"path":"/home/sergey/projects/whatbayGH/node_modules/cache-loader/dist/cjs.js","mtime":1643348323584},{"path":"/home/sergey/projects/whatbayGH/node_modules/vue-loader/lib/index.js","mtime":1643348325232}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDYWxlbmRhckl0ZW0gZnJvbSAiLi9DYWxlbmRhckl0ZW0iOwppbXBvcnQgQ2hvaWNlTWVudSBmcm9tICIuLi9tb2RhbC9DaG9pY2VNZW51IjsKaW1wb3J0IHttYXBHZXR0ZXJzLCBtYXBBY3Rpb25zfSBmcm9tICJ2dWV4IgppbXBvcnQgdXNlckRhdGEgZnJvbSAiLi4vY29tcG9zYWJsZXMvdXNlckRhdGEiOwppbXBvcnQgU2hvcExpc3RJdGVtIGZyb20gIi4uL3Nob3AvU2hvcExpc3RJdGVtIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQ2FsZW5kYXIiLAogIGNvbXBvbmVudHM6IHsKICAgIENhbGVuZGFySXRlbSwKICAgIENob2ljZU1lbnUsCiAgICBTaG9wTGlzdEl0ZW0KICB9LAoKICBwcm9wczogWydzZWxlY3RlZERhdGUnXSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzVmlzaWJsZTogZmFsc2UsCiAgICAgIGRhdGVMaXN0OiBuZXcgRGF0ZSgpLAogICAgfQogIH0sCgogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKFsKICAgICAgICAnZGF5T2ZNb250aCcsCiAgICAgICAgJ2FsbFNob3BzJywKICAgICAgICAnZ2V0U2hvcHNMaXN0JywKICAgICAgICAnZ2V0UXR5JywKICAgICAgICAnZ2V0U2hvcFVzZXJJZCcsCiAgICAgICAgJ2dldExpc3RCeURheScsCiAgICAgICAgJ2dldExpc3RVc2VySWQnCiAgICBdKSwKICAgIHRoaXNEYXRlTGlzdCgpIHsKICAgICAgcmV0dXJuIHRoaXMubGlzdEJ5RGF0ZSgpCiAgICB9LAogICAgZ2V0RGF0ZUxpc3QoKSB7CiAgICAgIGNvbnN0IHNob3BzID0gdGhpcy5nZXRTaG9wVXNlcklkOwogICAgICBjb25zdCBsaXN0cyA9IHRoaXMubGlzdEJ5RGF0ZSgpOwogICAgICBjb25zdCBhbGxMaXN0c0RhdGUgPSB1c2VyRGF0YShzaG9wcywgbGlzdHMpOwogICAgICBjb25zdCBoYXZlTGlzdCA9IFtdOwogICAgICBmb3IgKGxldCBsaXN0IG9mIGFsbExpc3RzRGF0ZSkgewogICAgICAgIGlmIChsaXN0Lmxpc3RzLmxlbmd0aCkgewogICAgICAgICAgaGF2ZUxpc3QucHVzaChsaXN0KQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gaGF2ZUxpc3Q7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgc2VsZWN0ZWREYXRlKCkgewogICAgICB0aGlzLmdldERheXNPZk1vbnRoKHRoaXMuc2VsZWN0ZWREYXRlKTsKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICAgIC4uLm1hcEFjdGlvbnMoWydmZXRjaFNob3BzJywgJ2dldERheXNPZk1vbnRoJywgJ2dldFVzZXJMaXN0QnlEYXRlJ10pLAoKICAgIHdlZWtEYXlOYW1lKGkpIHsKICAgICAgY29uc3QgZCA9IG5ldyBEYXRlKCcyMDIxLTA0LTA1JykKICAgICAgZC5zZXREYXRlKGQuZ2V0RGF0ZSgpICsgaSkKICAgICAgcmV0dXJuIGQudG9Mb2NhbGVEYXRlU3RyaW5nKCdydS1SVScsIHt3ZWVrZGF5OiAnc2hvcnQnfSkKICAgIH0sCiAgICBzaG93Q2hvaWNlTWVudSgpIHsKICAgICAgdGhpcy5pc1Zpc2libGUgPSB0cnVlCiAgICB9LAogICAgY2xvc2VEcm9wTWVudSgpIHsKICAgICAgdGhpcy5pc1Zpc2libGUgPSBmYWxzZQogICAgfSwKICAgIHNob3dMaXN0KHNlbGVjdERhdGUpIHsKICAgICAgdGhpcy5kYXRlTGlzdCA9IHNlbGVjdERhdGUKICAgIH0sCiAgICBsaXN0QnlEYXRlKCkgewogICAgICB0aGlzLmRhdGVMaXN0LnNldE1pbnV0ZXModGhpcy5kYXRlTGlzdC5nZXRNaW51dGVzKCkgLSB0aGlzLmRhdGVMaXN0LmdldFRpbWV6b25lT2Zmc2V0KCkpCiAgICAgIGNvbnN0IG5vdGVEYXkgPSB0aGlzLmRhdGVMaXN0LnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXQogICAgICBjb25zdCBsaXN0RGF5ID0gW10KICAgICAgZm9yIChsZXQgbGlzdCBvZiB0aGlzLmdldExpc3RVc2VySWQgKSB7CiAgICAgICAgbGV0IGxpc3RCeURheSA9IGxpc3QuY3JlYXRlZF9hdC5zcGxpdCgnVCcpWzBdCiAgICAgICAgaWYgKGxpc3RCeURheSA9PT0gbm90ZURheSkgewogICAgICAgICAgbGlzdERheS5wdXNoKGxpc3QpCiAgICAgICAgfQogICAgICB9CiAgICAgIC8vY29uc29sZS5sb2cobGlzdERheSkKICAgICAgcmV0dXJuIGxpc3REYXkKICAgIH0KICB9LAogICAgYXN5bmMgbW91bnRlZCgpIHsKICAgICAgdGhpcy5nZXREYXlzT2ZNb250aCh0aGlzLnNlbGVjdGVkRGF0ZSk7CiAgfSwKfQo="},{"version":3,"sources":["Calendar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Calendar.vue","sourceRoot":"src/components/calendar","sourcesContent":["<template>\n  <div>\n    <div class=\"content\">\n      <div class=\"calendar\">\n        <div class=\"calendar-week\" v-for=\"(_,i) in 7\">\n          <span class=\"weeklyDay\"\n            :class=\"{weekEnd: i === 5 || i === 6}\">{{ weekDayName(i) }}</span>\n        </div>\n        <div class=\"calendarItems\" v-for=\"day in dayOfMonth\">\n            <CalendarItem :data=\"day\" :noteData=\"dateList\" v-if=\"day\" @showList=\"showList\"/>\n        </div>\n      </div>\n      <div class=\"listDate\">\n        <div class=\"header-list\">\n          <div class=\"selectedDate\">\n            {{ dateList | date('date') }}\n          </div>\n          <div class=\"choiceMenu\">\n            <img src=\"../../assets/img/settings.svg\" @click=\"showChoiceMenu\">\n          </div>\n        </div>\n        <div v-if=\"Object.keys(thisDateList).length\">\n          <ShopListItem\n              v-for=\"(shop, idx) in getDateList\"\n              :idx = \"idx\"\n              :shop_data = \"shop\"\n          >\n          </ShopListItem>\n<!--          allShops-->\n<!--          *****************************************************-->\n<!--          <div class=\"listDate_body\" v-for=\"shopList in getDateList\">-->\n<!--            <div class=\"wrapper-shop\">-->\n<!--              <div class=\"shopData\">-->\n<!--                <div class=\"shopName\">-->\n<!--                  {{ shopList.shop_name }}-->\n<!--                </div>-->\n<!--                <div class=\"qtyList\">-->\n<!--                  {{ shopList.lists.length }} список-->\n<!--                </div>-->\n<!--              </div>-->\n<!--              <div class=\"show-shop-lists\">-->\n<!--                <img src=\"../../assets/img/showListShop.png\">-->\n<!--              </div>-->\n<!--              ************************************************-->\n<!--              <div class=\"close-shop-lists\" v-else @click=\"closeDropListShops\">-->\n<!--                <img src=\"../../assets/img/closeListShop.png\">-->\n<!--              </div>-->\n<!--            </div>-->\n<!--            <div class=\"shopData\">-->\n<!--              {{ dateList | date('short') }}-->\n<!--            </div>-->\n<!--            <div class=\"shopName\">-->\n<!--              {{ shopList.shop}}-->\n<!--            </div>-->\n<!--            <div class=\"quantity\">-->\n<!--              {{ shopList.purchase }}/{{ shopList.buy_prod }}-->\n<!--            </div>-->\n<!--          </div>-->\n        </div>\n        <div v-else>\n          <p>Нет списков на текущую дату</p>\n        </div>\n      </div>\n      <ChoiceMenu v-if=\"isVisible\" @closeDropMenu=\"closeDropMenu\"/>\n    </div>\n  </div>\n</template>\n\n<script>\nimport CalendarItem from \"./CalendarItem\";\nimport ChoiceMenu from \"../modal/ChoiceMenu\";\nimport {mapGetters, mapActions} from \"vuex\"\nimport userData from \"../composables/userData\";\nimport ShopListItem from \"../shop/ShopListItem\";\n\nexport default {\n  name: \"Calendar\",\n  components: {\n    CalendarItem,\n    ChoiceMenu,\n    ShopListItem\n  },\n\n  props: ['selectedDate'],\n\n  data() {\n    return {\n      isVisible: false,\n      dateList: new Date(),\n    }\n  },\n\n  computed: {\n    ...mapGetters([\n        'dayOfMonth',\n        'allShops',\n        'getShopsList',\n        'getQty',\n        'getShopUserId',\n        'getListByDay',\n        'getListUserId'\n    ]),\n    thisDateList() {\n      return this.listByDate()\n    },\n    getDateList() {\n      const shops = this.getShopUserId;\n      const lists = this.listByDate();\n      const allListsDate = userData(shops, lists);\n      const haveList = [];\n      for (let list of allListsDate) {\n        if (list.lists.length) {\n          haveList.push(list)\n        }\n      }\n      return haveList;\n    }\n  },\n  watch: {\n    selectedDate() {\n      this.getDaysOfMonth(this.selectedDate);\n    },\n  },\n  methods: {\n      ...mapActions(['fetchShops', 'getDaysOfMonth', 'getUserListByDate']),\n\n    weekDayName(i) {\n      const d = new Date('2021-04-05')\n      d.setDate(d.getDate() + i)\n      return d.toLocaleDateString('ru-RU', {weekday: 'short'})\n    },\n    showChoiceMenu() {\n      this.isVisible = true\n    },\n    closeDropMenu() {\n      this.isVisible = false\n    },\n    showList(selectDate) {\n      this.dateList = selectDate\n    },\n    listByDate() {\n      this.dateList.setMinutes(this.dateList.getMinutes() - this.dateList.getTimezoneOffset())\n      const noteDay = this.dateList.toISOString().split('T')[0]\n      const listDay = []\n      for (let list of this.getListUserId ) {\n        let listByDay = list.created_at.split('T')[0]\n        if (listByDay === noteDay) {\n          listDay.push(list)\n        }\n      }\n      //console.log(listDay)\n      return listDay\n    }\n  },\n    async mounted() {\n      this.getDaysOfMonth(this.selectedDate);\n  },\n}\n</script>\n\n<style scoped>\n.wrapper-shop {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n}\n.calendar {\n  display: grid;\n  grid-template-columns: repeat(7, 1fr);\n}\n.calendar-week {\n  margin-bottom: 20px;\n  min-height: 36px;\n  min-width: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.weeklyDay {\n  text-transform: uppercase;\n  font-weight: bold;\n}\n.weekEnd {\n  text-transform: uppercase;\n  font-weight: bold;\n  color: red;\n}\n.calendarItems {\n  min-height: 36px;\n  min-width: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.listDate {\n  width: 100%;\n  margin-top: 30px;\n}\n.header-list {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n  margin-bottom: 10px;\n}\n.listDate_body {\n  margin-top: 20px;\n  /*display: flex;*/\n  /*justify-content: space-between;*/\n}\n.note {\n  border-bottom: 1px solid darkblue;\n}\n</style>"]}]}