{"remainingRequest":"/home/sergey/projects/whatbayGH/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/sergey/projects/whatbayGH/src/components/shop/MyShops.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/sergey/projects/whatbayGH/src/components/shop/MyShops.vue","mtime":1643295873048},{"path":"/home/sergey/projects/whatbayGH/node_modules/cache-loader/dist/cjs.js","mtime":1643348323584},{"path":"/home/sergey/projects/whatbayGH/node_modules/babel-loader/lib/index.js","mtime":1643348324864},{"path":"/home/sergey/projects/whatbayGH/node_modules/cache-loader/dist/cjs.js","mtime":1643348323584},{"path":"/home/sergey/projects/whatbayGH/node_modules/vue-loader/lib/index.js","mtime":1643348325232}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBTaG9wTGlzdEl0ZW0gZnJvbSAiLi9TaG9wTGlzdEl0ZW0iOwppbXBvcnQge21hcEFjdGlvbnMsIG1hcEdldHRlcnN9IGZyb20gInZ1ZXgiOwppbXBvcnQgdXNlckRhdGEgZnJvbSAiLi4vY29tcG9zYWJsZXMvdXNlckRhdGEiOwppbXBvcnQgZ2V0SVNPIGZyb20gIi4uL2NvbXBvc2FibGVzL2dldElTTyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIk15U2hvcHMiLAoKICBjb21wb25lbnRzOiB7CiAgICBTaG9wTGlzdEl0ZW0KICB9LAoKICBwcm9wczogWydpZFVzZXInXSwKCiAgbWV0aG9kczogewogICAgZ2V0SWQgKCkgewogICAgICBjb25zdCB1c2VyX2lkID0gewogICAgICAgIGlkOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2F2ZVVzZXJJZCcpCiAgICAgIH0KICAgICAgcmV0dXJuIHVzZXJfaWQKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzCiAgICAoWwogICAgICAnZ2V0U2hvcHNMaXN0JywKICAgICAgJ2dldFVzZXInLAogICAgICAnZ2V0U2hvcFVzZXJJZCcsCiAgICAgICdnZXRVc2VySWQnLAogICAgICAnZ2V0U2hvcHNPcHRpb25MaXN0JywKICAgICAgJ2dldExpc3RVc2VySWQnLAogICAgICAnZ2V0UHJvZHVjdFVzZXJJZCcsCiAgICAgICdnZXRDYXRlZ29yeVVzZXJJZCcsCiAgICAgICAgJ3VzZXJJZCcKICAgIF0pLAoKICAgZGF0YVVzZXJJZCgpIHsKICAgICAgY29uc3Qgc2hvcHMgPSB0aGlzLmdldFNob3BVc2VySWQ7CiAgICAgIGNvbnN0IGxpc3RzID0gdGhpcy5nZXRMaXN0VXNlcklkOwogICAgIHJldHVybiB1c2VyRGF0YShzaG9wcywgbGlzdHMpOwogICAgfSwKCiAgIGN1cnJlbnRMaXN0cygpIHsKICAgICAgY29uc3QgY3VycmVudERhdGEgPSBbXTsKICAgICAgZm9yIChsZXQgZGF0YSBvZiB0aGlzLmRhdGFVc2VySWQpIHsKICAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEpCiAgICAgICAgY29uc3QgZGF0YUxpc3QgPSBbXQogICAgICAgIGZvciAobGV0IGxpc3Qgb2YgZGF0YS5saXN0cykgewogICAgICAgICAvL2NvbnNvbGUubG9nKGxpc3QpCiAgICAgICAgICBjb25zdCBjdXJyZW50TGlzdCA9IFtdCiAgICAgICAgICBpZiAobGlzdC5kYXkuc3BsaXQoJ1QnKVswXSA+PSBnZXRJU08obmV3IERhdGUoKSkpIHsKICAgICAgICAgICAgY3VycmVudExpc3QucHVzaChsaXN0KQogICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGN1cnJlbnRMaXN0KQogICAgICAgICAgfQogICAgICAgICAgLy9jb25zb2xlLmxvZyhjdXJyZW50TGlzdCkKICAgICAgICAgIC8vZGF0YUxpc3QucHVzaChjdXJyZW50TGlzdCkKICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YUxpc3QpCiAgICAgICAgfQogICAgICAgIC8vY29uc29sZS5sb2coZGF0YUxpc3QpCiAgICAgICAgLy8gaWYgKGxpc3QuZGF5LnNwbGl0KCdUJylbMF0gPj0gZ2V0SVNPKG5ldyBEYXRlKCkpKSB7CiAgICAgICAgICAvLyBjdXJyZW50RGF0YS5wdXNoKGRhdGFMaXN0KQogICAgICAgIC8vIH0KICAgICAgfQogICAgICAvLyBjb25zb2xlLmxvZyhjdXJyZW50RGF0YSkKICAgICAgcmV0dXJuIGN1cnJlbnREYXRhCiAgIH0KICB9LAogIGFzeW5jIGJlZm9yZVVwZGF0ZSgpIHsKICAgIGlmICghT2JqZWN0LmtleXModGhpcy5nZXRVc2VyKS5sZW5ndGgpIHsKICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2N1cnJlbnRVc2VyJykKICAgIH0KCiAgfSwKICBhc3luYyBtb3VudGVkKCkgewogICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2dldFNob3BGcm9tVXNlcklkJywgdGhpcy5nZXRJZCgpKQogICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2dldExpc3RGcm9tVXNlcklkJywgdGhpcy5nZXRJZCgpKQogICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2dldENhdGVnb3J5RnJvbVVzZXJJZCcsIHRoaXMuZ2V0SWQoKSkKICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdnZXRQcm9kdWN0RnJvbVVzZXJJZCcsIHRoaXMuZ2V0SWQoKSkKCiAgfSwKCn0K"},{"version":3,"sources":["MyShops.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA","file":"MyShops.vue","sourceRoot":"src/components/shop","sourcesContent":["<template>\n  <div>\n<!--    :key=\"reRender\"-->\n    <div class=\"main-wrapper flex-center-column\">\n      <div v-if=\"dataUserId.length\">\n        <ShopListItem\n          v-for=\"(shop, idx) in dataUserId\"\n          :idx = \"idx\"\n          :shop_data = \"shop\"\n        >\n        </ShopListItem>\n      </div>\n      <div v-else>\n        <p>У Вас пока нет магазинов и списков</p>\n      </div>\n      <router-link :to=\"{name: 'newList', params: {user_id: getUserId}}\"\n                   class=\"button btn-new-list\">+</router-link>\n    </div>\n    {{currentLists}}\n  </div>\n</template>\n\n<script>\nimport ShopListItem from \"./ShopListItem\";\nimport {mapActions, mapGetters} from \"vuex\";\nimport userData from \"../composables/userData\";\nimport getISO from \"../composables/getISO\";\n\nexport default {\n  name: \"MyShops\",\n\n  components: {\n    ShopListItem\n  },\n\n  props: ['idUser'],\n\n  methods: {\n    getId () {\n      const user_id = {\n        id: localStorage.getItem('saveUserId')\n      }\n      return user_id\n    }\n  },\n  computed: {\n    ...mapGetters\n    ([\n      'getShopsList',\n      'getUser',\n      'getShopUserId',\n      'getUserId',\n      'getShopsOptionList',\n      'getListUserId',\n      'getProductUserId',\n      'getCategoryUserId',\n        'userId'\n    ]),\n\n   dataUserId() {\n      const shops = this.getShopUserId;\n      const lists = this.getListUserId;\n     return userData(shops, lists);\n    },\n\n   currentLists() {\n      const currentData = [];\n      for (let data of this.dataUserId) {\n       // console.log(data)\n        const dataList = []\n        for (let list of data.lists) {\n         //console.log(list)\n          const currentList = []\n          if (list.day.split('T')[0] >= getISO(new Date())) {\n            currentList.push(list)\n           // console.log(currentList)\n          }\n          //console.log(currentList)\n          //dataList.push(currentList)\n         // console.log(dataList)\n        }\n        //console.log(dataList)\n        // if (list.day.split('T')[0] >= getISO(new Date())) {\n          // currentData.push(dataList)\n        // }\n      }\n      // console.log(currentData)\n      return currentData\n   }\n  },\n  async beforeUpdate() {\n    if (!Object.keys(this.getUser).length) {\n      await this.$store.dispatch('currentUser')\n    }\n\n  },\n  async mounted() {\n    await this.$store.dispatch('getShopFromUserId', this.getId())\n    await this.$store.dispatch('getListFromUserId', this.getId())\n    await this.$store.dispatch('getCategoryFromUserId', this.getId())\n    await this.$store.dispatch('getProductFromUserId', this.getId())\n\n  },\n\n}\n</script>\n\n<style scoped>\n  .btn-new-list {\n    width: 32px;\n    height: 32px;\n    font-size: 32px;\n    position: fixed;\n    right: 16px;\n    bottom: 32px;\n  }\n</style>"]}]}