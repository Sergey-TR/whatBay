{"remainingRequest":"/home/sergey/projects/whatbayGH/node_modules/babel-loader/lib/index.js!/home/sergey/projects/whatbayGH/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/sergey/projects/whatbayGH/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/sergey/projects/whatbayGH/src/views/CreateProduct.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/sergey/projects/whatbayGH/src/views/CreateProduct.vue","mtime":1643276979377},{"path":"/home/sergey/projects/whatbayGH/babel.config.js","mtime":1638251051908},{"path":"/home/sergey/projects/whatbayGH/node_modules/cache-loader/dist/cjs.js","mtime":1643348323584},{"path":"/home/sergey/projects/whatbayGH/node_modules/babel-loader/lib/index.js","mtime":1643348324864},{"path":"/home/sergey/projects/whatbayGH/node_modules/cache-loader/dist/cjs.js","mtime":1643348323584},{"path":"/home/sergey/projects/whatbayGH/node_modules/vue-loader/lib/index.js","mtime":1643348325232}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvc2VyZ2V5L3Byb2plY3RzL3doYXRiYXlHSC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvaG9tZS9zZXJnZXkvcHJvamVjdHMvd2hhdGJheUdIL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gInZ1ZXgiOwppbXBvcnQgTW9kYWxOZXdDYXRlZ29yeSBmcm9tICIuLi9jb21wb25lbnRzL21vZGFsL01vZGFsTmV3Q2F0ZWdvcnkiOwppbXBvcnQgTW9kYWxOZXdQcm9kdWN0IGZyb20gIi4uL2NvbXBvbmVudHMvbW9kYWwvTW9kYWxOZXdQcm9kdWN0IjsKaW1wb3J0IHByb2R1Y3RGaWx0ZXIgZnJvbSAiLi4vZmlsdGVycy9wcm9kdWN0LmZpbHRlciI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQ3JlYXRlUHJvZHVjdCIsCiAgY29tcG9uZW50czogewogICAgTW9kYWxOZXdDYXRlZ29yeTogTW9kYWxOZXdDYXRlZ29yeSwKICAgIE1vZGFsTmV3UHJvZHVjdDogTW9kYWxOZXdQcm9kdWN0CiAgfSwKICBwcm9wczogWydzaG9wJywgJ2RheScsICdpZCcsICdsaXN0X2lkJ10sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHByb2R1Y3Q6ICdudWxsJywKICAgICAgY2F0ZWdvcnlfaWQ6IDAsCiAgICAgIGlzTW9kYWxOZXdDYXRlZ29yeTogZmFsc2UsCiAgICAgIGlzTW9kYWxOZXdQcm9kdWN0OiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNyZWF0ZVByb2R1Y3Q6IGZ1bmN0aW9uIGNyZWF0ZVByb2R1Y3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBpc1Byb2R1Y3QsIG5ld1Byb2R1Y3Q7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaXNQcm9kdWN0ID0gX3RoaXMuZ2V0TGlzdFByb2R1Y3RzLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5wcm9kdWN0X25hbWUgPT09IF90aGlzLnByb2R1Y3Q7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAoaXNQcm9kdWN0Lmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIG5ld1Byb2R1Y3QgPSB7CiAgICAgICAgICAgICAgICAgIGNhdGVnb3J5X2lkOiBfdGhpcy5jYXRlZ29yeV9pZCwKICAgICAgICAgICAgICAgICAgZGF5OiBfdGhpcy5kYXksCiAgICAgICAgICAgICAgICAgIGlzX3N1Y2Nlc3M6IGZhbHNlLAogICAgICAgICAgICAgICAgICBzaG9wX2lkOiBfdGhpcy5pZCwKICAgICAgICAgICAgICAgICAgc2hvcF9uYW1lOiBfdGhpcy5zaG9wLAogICAgICAgICAgICAgICAgICBvcmRlcl9pZDogX3RoaXMuaWQsCiAgICAgICAgICAgICAgICAgIGNhdGVnb3J5X25hbWU6IF90aGlzLmNhdGVnb3J5LAogICAgICAgICAgICAgICAgICBwcm9kdWN0X25hbWU6IF90aGlzLnByb2R1Y3QsCiAgICAgICAgICAgICAgICAgIHVzZXJfaWQ6IF90aGlzLmdldFVzZXJJZCwKICAgICAgICAgICAgICAgICAgbGlzdF9pZDogX3RoaXMubGlzdF9pZAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAzOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCdjcmVhdGVOZXdPcmRlcnNQcm9kdWN0JywgbmV3UHJvZHVjdCk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgnY3JlYXRlTmV3UHJvZHVjdCcsIG5ld1Byb2R1Y3QpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuJHJvdXRlci5wdXNoKCIvbXlfc2hvcHNfc2hvcC8iLmNvbmNhdChfdGhpcy5pZCwgIi8iKS5jb25jYXQoX3RoaXMuc2hvcCwgIi8iKS5jb25jYXQoX3RoaXMuZGF5KSk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMjsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMyk7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgIGFsZXJ0KCfQn9GA0L7QtNGD0LrRgiDQtdGB0YLRjCDQsiDRgdC/0LjRgdC60LUnKTsKCiAgICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMywgMTJdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHNob3dNb2RhbE5ld0NhdGVnb3J5OiBmdW5jdGlvbiBzaG93TW9kYWxOZXdDYXRlZ29yeSgpIHsKICAgICAgdGhpcy5pc01vZGFsTmV3Q2F0ZWdvcnkgPSB0cnVlOwogICAgfSwKICAgIHNob3dNb2RhbE5ld1Byb2R1Y3Q6IGZ1bmN0aW9uIHNob3dNb2RhbE5ld1Byb2R1Y3QoKSB7CiAgICAgIHRoaXMuaXNNb2RhbE5ld1Byb2R1Y3QgPSB0cnVlOwogICAgfSwKICAgIGNsb3NlTW9kYWxDcmVhdGVQcm9kdWN0OiBmdW5jdGlvbiBjbG9zZU1vZGFsQ3JlYXRlUHJvZHVjdCgpIHsKICAgICAgdGhpcy5pc01vZGFsTmV3UHJvZHVjdCA9IGZhbHNlOwogICAgfSwKICAgIGNsb3NlTW9kYWxDcmVhdGVDYXRlZ29yeTogZnVuY3Rpb24gY2xvc2VNb2RhbENyZWF0ZUNhdGVnb3J5KCkgewogICAgICB0aGlzLmlzTW9kYWxOZXdDYXRlZ29yeSA9IGZhbHNlOwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwR2V0dGVycyhbJ2dldExpc3RQcm9kdWN0cycsICdnZXRDYXRlZ29yeVVzZXJJZCcsICdnZXRVc2VySWQnLCAnZ2V0UHJvZHVjdFVzZXJJZCddKSksIHt9LCB7CiAgICBwcm9kdWN0czogZnVuY3Rpb24gcHJvZHVjdHMoKSB7CiAgICAgIHJldHVybiBwcm9kdWN0RmlsdGVyKHRoaXMuY2F0ZWdvcnlfaWQsIHRoaXMuZ2V0UHJvZHVjdFVzZXJJZCk7CiAgICB9CiAgfSksCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHt9Cn07"},{"version":3,"sources":["CreateProduct.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA,SAAA,UAAA,QAAA,MAAA;AACA,OAAA,gBAAA,MAAA,sCAAA;AACA,OAAA,eAAA,MAAA,qCAAA;AACA,OAAA,aAAA,MAAA,2BAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,eADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,gBAAA,EAAA,gBADA;AAEA,IAAA,eAAA,EAAA;AAFA,GAFA;AAOA,EAAA,KAAA,EAAA,CAAA,MAAA,EAAA,KAAA,EAAA,IAAA,EAAA,SAAA,CAPA;AASA,EAAA,IATA,kBASA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,MADA;AAEA,MAAA,WAAA,EAAA,CAFA;AAGA,MAAA,kBAAA,EAAA,KAHA;AAIA,MAAA,iBAAA,EAAA;AAJA,KAAA;AAMA,GAhBA;AAkBA,EAAA,OAAA,EAAA;AACA,IAAA,aADA,2BACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,SADA,GACA,KAAA,CAAA,eAAA,CAAA,MAAA,CAAA,UAAA,IAAA;AAAA,yBAAA,IAAA,CAAA,YAAA,KAAA,KAAA,CAAA,OAAA;AAAA,iBAAA,CADA;;AAAA,oBAEA,SAAA,CAAA,MAFA;AAAA;AAAA;AAAA;;AAGA,gBAAA,UAHA,GAGA;AACA,kBAAA,WAAA,EAAA,KAAA,CAAA,WADA;AAEA,kBAAA,GAAA,EAAA,KAAA,CAAA,GAFA;AAGA,kBAAA,UAAA,EAAA,KAHA;AAIA,kBAAA,OAAA,EAAA,KAAA,CAAA,EAJA;AAKA,kBAAA,SAAA,EAAA,KAAA,CAAA,IALA;AAMA,kBAAA,QAAA,EAAA,KAAA,CAAA,EANA;AAOA,kBAAA,aAAA,EAAA,KAAA,CAAA,QAPA;AAQA,kBAAA,YAAA,EAAA,KAAA,CAAA,OARA;AASA,kBAAA,OAAA,EAAA,KAAA,CAAA,SATA;AAUA,kBAAA,OAAA,EAAA,KAAA,CAAA;AAVA,iBAHA;AAAA;AAAA;AAAA,uBAgBA,KAAA,CAAA,MAAA,CAAA,QAAA,CAAA,wBAAA,EAAA,UAAA,CAhBA;;AAAA;AAAA;AAAA,uBAiBA,KAAA,CAAA,MAAA,CAAA,QAAA,CAAA,kBAAA,EAAA,UAAA,CAjBA;;AAAA;AAAA;AAAA,uBAkBA,KAAA,CAAA,OAAA,CAAA,IAAA,0BAAA,KAAA,CAAA,EAAA,cAAA,KAAA,CAAA,IAAA,cAAA,KAAA,CAAA,GAAA,EAlBA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAqBA,gBAAA,KAAA,CAAA,uBAAA,CAAA;;AArBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAuBA,KAxBA;AA0BA,IAAA,oBA1BA,kCA0BA;AACA,WAAA,kBAAA,GAAA,IAAA;AACA,KA5BA;AA8BA,IAAA,mBA9BA,iCA8BA;AACA,WAAA,iBAAA,GAAA,IAAA;AACA,KAhCA;AAiCA,IAAA,uBAjCA,qCAiCA;AACA,WAAA,iBAAA,GAAA,KAAA;AACA,KAnCA;AAoCA,IAAA,wBApCA,sCAoCA;AACA,WAAA,kBAAA,GAAA,KAAA;AACA;AAtCA,GAlBA;AA2DA,EAAA,QAAA,kCACA,UAAA,CACA,CACA,iBADA,EAEA,mBAFA,EAGA,WAHA,EAIA,kBAJA,CADA,CADA;AASA,IAAA,QATA,sBASA;AACA,aAAA,aAAA,CAAA,KAAA,WAAA,EAAA,KAAA,gBAAA,CAAA;AACA;AAXA,IA3DA;AAwEA,EAAA,OAxEA,qBAwEA,CAAA;AAxEA,CAAA","sourcesContent":["<template>\n  <div>\n    <form class=\"form-create\" method=\"post\" @submit.prevent=\"createProduct\">\n      <div class=\"w-100\">\n        <div class=\"select-wrapper\">\n          <div class=\"w-100\">\n            <select v-model=\"category_id\" class=\"new-shop-list-select\">\n              <option value=\"null\" disabled selected class=\"opSelected\">Без категории</option>\n              <option v-for=\"option in getCategoryUserId\" :key=\"option.id\"\n                    :value=\"option.id\">\n                {{ option.category_name}}\n              </option>\n            </select>\n          </div>\n          <div class=\"btn-add-product\" @click=\"showModalNewCategory\">+</div>\n        </div>\n        <p class=\"small p-2\">выберите категорию или <br>\n          <span class=\"btn-add-category\" @click=\"showModalNewCategory\">добавте новую</span></p>\n      </div>\n      <div class=\"w-100\">\n        <div class=\"select-wrapper\">\n          <div class=\"w-100\">\n            <select v-model=\"product\" class=\"new-shop-list-select\">\n              <option value=\"null\" disabled selected class=\"opSelected\">Выберите продукт</option>\n              <option v-for=\"opProduct in products\" :value=\"opProduct.product_name\">\n                {{ opProduct.product_name}}\n              </option>\n            </select>\n          </div>\n          <div class=\"btn-add-product\" @click=\"showModalNewProduct\">+</div>\n        </div>\n        <p class=\"small p-2\">выберите продукт или <br>\n          <span class=\"btn-add-category\" @click=\"showModalNewProduct\">добавить новый</span>\n        </p>\n      </div>\n      <button class=\"button btn-add\" type=\"submit\">Добавить</button>\n    </form>\n    <ModalNewCategory v-if=\"isModalNewCategory\"\n                      :category_id=\"this.category_id\"\n                      :shop=\"this.shop\"\n                      :day=\"this.day\"\n                      :id=\"this.id\"\n                      @closeModalCreateCategory=\"closeModalCreateCategory\"/>\n    <ModalNewProduct v-if=\"isModalNewProduct\"\n                     :category_id=\"this.category_id\"\n                     :shop=\"this.shop\"\n                     :day=\"this.day\"\n                     :id=\"this.id\"\n                     :user_id=\"this.getUserId\"\n                     :list_id=\"this.list_id\"\n    @closeModalCreateProduct=\"closeModalCreateProduct\"/>\n  </div>\n</template>\n\n<script>\nimport {mapGetters} from \"vuex\";\nimport ModalNewCategory from \"../components/modal/ModalNewCategory\";\nimport ModalNewProduct from \"../components/modal/ModalNewProduct\";\nimport productFilter from \"../filters/product.filter\";\n\nexport default {\n  name: \"CreateProduct\",\n  components: {\n    ModalNewCategory,\n    ModalNewProduct\n  },\n\n  props: ['shop', 'day', 'id', 'list_id'],\n\n  data () {\n    return {\n      product: 'null',\n      category_id: 0,\n      isModalNewCategory: false,\n      isModalNewProduct: false\n    }\n  },\n\n  methods: {\n    async createProduct() {\n      const isProduct = this.getListProducts.filter(item => item.product_name === this.product)\n      if (!isProduct.length) {\n        const newProduct = {\n          category_id: this.category_id,\n          day: this.day,\n          is_success: false,\n          shop_id: this.id,\n          shop_name: this.shop,\n          order_id: this.id,\n          category_name: this.category,\n          product_name: this.product,\n          user_id: this.getUserId,\n          list_id: this.list_id\n        }\n        try {\n          await this.$store.dispatch('createNewOrdersProduct', newProduct)\n          await this.$store.dispatch('createNewProduct', newProduct)\n          await this.$router.push(`/my_shops_shop/${this.id}/${this.shop}/${this.day}`)\n        } catch (e) {}\n      } else {\n        alert('Продукт есть в списке')\n      }\n    },\n\n    showModalNewCategory() {\n      this.isModalNewCategory = true\n    },\n\n    showModalNewProduct() {\n      this.isModalNewProduct = true\n    },\n    closeModalCreateProduct() {\n      this.isModalNewProduct = false\n    },\n    closeModalCreateCategory() {\n      this.isModalNewCategory = false\n    }\n  },\n\n  computed: {\n    ...mapGetters\n    ([\n      'getListProducts',\n      'getCategoryUserId',\n      'getUserId',\n      'getProductUserId'\n    ]),\n\n    products() {\n      return  productFilter(this.category_id, this.getProductUserId)\n    },\n  },\n  mounted() {}\n}\n</script>\n\n<style scoped>\n  .new-shop-list-select {\n    border: 1px solid #c4c4c4;\n    background: none;\n    outline: none;\n    /*min-width: 200px;*/\n    width: 100%;\n    height: 56px;\n    border-radius: 7px;\n    padding: 0px 11px;\n    color: #242e42;\n    --webkit-appearence: none;\n    --moz-appearance: none;\n    --ms-appearance: none;\n    appearance: none;\n    background-image: url(\"data:image/svg+xml,%3Csvg width='10' height='5' viewBox='0 0 10 5' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0L5 5L10 0H0Z' fill='black' fill-opacity='0.54'/%3E%3C/svg%3E%0A\");\n    background-repeat: no-repeat;\n    background-position-x: right;\n    background-position-y: center;\n    background-origin: content-box;\n  }\n  .form-create {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    padding: 0px 16px;\n  }\n  .select-wrapper {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n  }\n  .btn-add-category {\n    border: none;\n    background: none;\n    outline: none;\n    color: #2C9AB7;\n  }\n  .btn-add-category:hover {\n    color: #2C9AB7;\n    font-weight: bold;\n    text-decoration: underline;\n  }\n  .btn-add {\n    width: 150px;\n    height: 56px;\n  }\n  .btn-add-product {\n    border: 1px solid #2C9AB7;\n    background: none;\n    outline: none;\n    border-radius: 7px;\n    color: #2C9AB7;\n    width: 50px;\n    height: 50px;\n    font-size: 32px;\n    margin-left: 10px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  .btn-add-product:hover {\n    background: #2C9AB7;\n    color: #FFFFFF;\n  }\n</style>"],"sourceRoot":"src/views"}]}