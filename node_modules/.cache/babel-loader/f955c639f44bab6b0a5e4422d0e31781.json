{"remainingRequest":"/home/sergey/projects/whatbayGH/node_modules/babel-loader/lib/index.js!/home/sergey/projects/whatbayGH/src/components/composables/initApi.js","dependencies":[{"path":"/home/sergey/projects/whatbayGH/src/components/composables/initApi.js","mtime":1641452335930},{"path":"/home/sergey/projects/whatbayGH/babel.config.js","mtime":1638251051908},{"path":"/home/sergey/projects/whatbayGH/node_modules/cache-loader/dist/cjs.js","mtime":1643348323584},{"path":"/home/sergey/projects/whatbayGH/node_modules/babel-loader/lib/index.js","mtime":1643348324864}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHJvdXRlciBmcm9tICIuLi8uLi9yb3V0ZXIvcm91dGVyIjsKdmFyIGFwaSA9IGF4aW9zLmNyZWF0ZSgpOyAvL3N0YXJ0IHJlcXVlc3QKCmFwaS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2F2ZVRva2VuJykpIHsKICAgIGNvbmZpZy5oZWFkZXJzLmF1dGhvcml6YXRpb24gPSAiQmVhcmVyICIuY29uY2F0KGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzYXZlVG9rZW4nKSk7CiAgfQoKICByZXR1cm4gY29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHt9KTsgLy9lbmQgcmVxdWVzdAoKYXBpLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2F2ZVRva2VuJykpIHsKICAgIGNvbmZpZy5oZWFkZXJzLmF1dGhvcml6YXRpb24gPSAiQmVhcmVyICIuY29uY2F0KGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzYXZlVG9rZW4nKSk7CiAgfQoKICByZXR1cm4gY29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHsKICAgIHJvdXRlci5wdXNoKCcvbG9naW4nKTsKICB9Cn0pOwpleHBvcnQgZGVmYXVsdCBhcGk7"},{"version":3,"sources":["/home/sergey/projects/whatbayGH/src/components/composables/initApi.js"],"names":["axios","router","api","create","interceptors","request","use","config","localStorage","getItem","headers","authorization","error","response","status","push"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AAEA,IAAMC,GAAG,GAAGF,KAAK,CAACG,MAAN,EAAZ,C,CACA;;AACAD,GAAG,CAACE,YAAJ,CAAiBC,OAAjB,CAAyBC,GAAzB,CAA6B,UAAAC,MAAM,EAAI;AACnC,MAAIC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAJ,EAAuC;AACnCF,IAAAA,MAAM,CAACG,OAAP,CAAeC,aAAf,oBAAyCH,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAzC;AACH;;AACD,SAAOF,MAAP;AACH,CALD,EAKG,UAAAK,KAAK,EAAI,CAEX,CAPD,E,CAQA;;AAEAV,GAAG,CAACE,YAAJ,CAAiBS,QAAjB,CAA0BP,GAA1B,CAA8B,UAAAC,MAAM,EAAI;AACpC,MAAIC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAJ,EAAuC;AACnCF,IAAAA,MAAM,CAACG,OAAP,CAAeC,aAAf,oBAAyCH,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAzC;AACH;;AACD,SAAOF,MAAP;AACH,CALD,EAKG,UAAAK,KAAK,EAAI;AACR,MAAIA,KAAK,CAACC,QAAN,CAAeC,MAAf,KAA0B,GAA9B,EAAmC;AAC/Bb,IAAAA,MAAM,CAACc,IAAP,CAAY,QAAZ;AACH;AACJ,CATD;AAWA,eAAeb,GAAf","sourcesContent":["import axios from \"axios\";\nimport router from \"../../router/router\";\n\nconst api = axios.create();\n//start request\napi.interceptors.request.use(config => {\n    if (localStorage.getItem('saveToken')) {\n        config.headers.authorization = `Bearer ${localStorage.getItem('saveToken')}`\n    }\n    return config\n}, error => {\n\n})\n//end request\n\napi.interceptors.response.use(config => {\n    if (localStorage.getItem('saveToken')) {\n        config.headers.authorization = `Bearer ${localStorage.getItem('saveToken')}`\n    }\n    return config\n}, error => {\n    if (error.response.status === 401) {\n        router.push('/login')\n    }\n})\n\nexport default api"]}]}